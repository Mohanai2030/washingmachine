let data = [
    {
      "chatcontent": "Hello, I'm having trouble with my recent order #45678.",
      "message_date": "2025-03-01",
      "message_time": "09:23",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "Hi there! I'd be happy to help with your order. Could you please provide more details about the issue?",
      "message_date": "2025-03-01",
      "message_time": "09:25",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "The product arrived damaged. The package looked like it was mishandled during shipping.",
      "message_date": "2025-03-01",
      "message_time": "09:28",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "I'm sorry to hear that. Could you send some photos of the damaged item and packaging?",
      "message_date": "2025-03-01",
      "message_time": "09:30",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "Just sent the photos to your email address.",
      "message_date": "2025-03-01",
      "message_time": "09:42",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "Thank you. I've received the photos and filed a damage claim. We'll ship a replacement immediately.",
      "message_date": "2025-03-01",
      "message_time": "09:45",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "That's great! How long will it take to arrive?",
      "message_date": "2025-03-01",
      "message_time": "09:47",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "Your replacement should arrive within 3-5 business days. You'll receive tracking information shortly.",
      "message_date": "2025-03-01",
      "message_time": "09:50",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "Perfect, thank you for the quick resolution!",
      "message_date": "2025-03-01",
      "message_time": "09:52",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "You're welcome! Is there anything else I can help you with today?",
      "message_date": "2025-03-01",
      "message_time": "09:53",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "Hi, I'd like to know if the blue sweater in medium is back in stock yet?",
      "message_date": "2025-03-01",
      "message_time": "11:05",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "Let me check our inventory system for you. One moment please.",
      "message_date": "2025-03-01",
      "message_time": "11:07",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "I'm happy to let you know that we just received a new shipment! The blue sweater in medium is now available.",
      "message_date": "2025-03-01",
      "message_time": "11:10",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "That's great news! I'll place my order right away.",
      "message_date": "2025-03-01",
      "message_time": "11:12",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "Wonderful! If you need any assistance with the ordering process, please let me know.",
      "message_date": "2025-03-01",
      "message_time": "11:14",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "I need to change my delivery address for order #789012. Is that possible?",
      "message_date": "2025-03-01",
      "message_time": "13:45",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "I'd be happy to help with that. Has your order been shipped yet?",
      "message_date": "2025-03-01",
      "message_time": "13:47",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "No, the status says 'Processing' on your website.",
      "message_date": "2025-03-01",
      "message_time": "13:50",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "Perfect! We can definitely change the address. Could you provide the new delivery address?",
      "message_date": "2025-03-01",
      "message_time": "13:52",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "It's 123 Main Street, Apt 4B, New York, NY 10001.",
      "message_date": "2025-03-01",
      "message_time": "13:55",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "Thank you. I've updated your delivery address. Your order will be shipped to the new address.",
      "message_date": "2025-03-01",
      "message_time": "14:00",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "Could you tell me when my subscription will renew?",
      "message_date": "2025-03-01",
      "message_time": "15:30",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "I'd be happy to check that for you. Could you provide your account email or subscription ID?",
      "message_date": "2025-03-01",
      "message_time": "15:32",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "My email is customer@example.com",
      "message_date": "2025-03-01",
      "message_time": "15:35",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "Thank you. I can see that your subscription is set to renew on April 15, 2025.",
      "message_date": "2025-03-01",
      "message_time": "15:38",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "I'd like to cancel my subscription before it renews. How do I do that?",
      "message_date": "2025-03-01",
      "message_time": "15:40",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "You can cancel by going to Account Settings > Subscriptions > Cancel. Would you like me to help you with that now?",
      "message_date": "2025-03-01",
      "message_time": "15:42",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "Yes, please help me cancel it now.",
      "message_date": "2025-03-01",
      "message_time": "15:45",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "I've processed your cancellation. You'll receive an email confirmation shortly. Your subscription will remain active until April 15.",
      "message_date": "2025-03-01",
      "message_time": "15:48",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "Thank you for your assistance!",
      "message_date": "2025-03-01",
      "message_time": "15:50",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "Hello! I'm interested in your premium plan but have some questions before upgrading.",
      "message_date": "2025-03-02",
      "message_time": "10:15",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "Good morning! I'd be happy to answer any questions you have about our premium plan.",
      "message_date": "2025-03-02",
      "message_time": "10:17",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "Does the premium plan include unlimited file storage?",
      "message_date": "2025-03-02",
      "message_time": "10:20",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "The premium plan includes 1TB of storage, which is a significant upgrade from the 50GB in the basic plan.",
      "message_date": "2025-03-02",
      "message_time": "10:22",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "What about the number of users? Can I add my team members?",
      "message_date": "2025-03-02",
      "message_time": "10:25",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "Yes, the premium plan allows up to 10 team members. Each additional user costs $5/month.",
      "message_date": "2025-03-02",
      "message_time": "10:27",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "That sounds good. Do you offer any discounts for annual billing?",
      "message_date": "2025-03-02",
      "message_time": "10:30",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "We offer a 15% discount when billed annually. It's a great way to save if you're planning to use the service long-term.",
      "message_date": "2025-03-02",
      "message_time": "10:32",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "Perfect! I think I'll go with the annual premium plan then.",
      "message_date": "2025-03-02",
      "message_time": "10:35",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "Excellent choice! I'll send you a link to complete the upgrade. Thank you for choosing our premium service!",
      "message_date": "2025-03-02",
      "message_time": "10:37",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "I'm having trouble logging into my account. It says 'invalid credentials'.",
      "message_date": "2025-03-02",
      "message_time": "14:20",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "I'm sorry to hear that. Let's get you back into your account. Have you tried resetting your password?",
      "message_date": "2025-03-02",
      "message_time": "14:22",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "Yes, but I'm not receiving the password reset email.",
      "message_date": "2025-03-02",
      "message_time": "14:25",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "Let me check if we can send the reset email to an alternative address. Could you provide your account username?",
      "message_date": "2025-03-02",
      "message_time": "14:27",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "My username is johndoe2025",
      "message_date": "2025-03-02",
      "message_time": "14:30",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "Thank you. I see you have a backup email on file. I've sent a password reset link to both your primary and backup emails.",
      "message_date": "2025-03-02",
      "message_time": "14:33",
      "sender": "admin",
      "receiver": "customer"
    },
    {
      "chatcontent": "Got it! I just received the email on my backup address. Thank you!",
      "message_date": "2025-03-02",
      "message_time": "14:40",
      "sender": "customer",
      "receiver": "admin"
    },
    {
      "chatcontent": "You're welcome! If you need any further assistance, please don't hesitate to ask.",
      "message_date": "2025-03-02",
      "message_time": "14:42",
      "sender": "admin",
      "receiver": "customer"
    }
  ]

//need: you will get messages .You need to group them by same user first and then by same date
function check(data){
  let answer = {}
  data.forEach(message => {
    if(!answer?.[message.customer_name]){
      answer[message.customer_name] = []
    }
    answer[message.customer_name].push(message)
  })

  // console.log(answer);
  
  Object.keys(answer).forEach(customer => {
    let now = answer[customer];
    let newnow = {}
    now.forEach(message => {
      if(!newnow?.[message.message_date]){
        newnow[message.message_date] = []
      }
      newnow[message.message_date].push(message)
    })
    answer[customer] = newnow
    
  })

  Object.keys(answer).forEach(customer => {
    let eachCustomerDate = Object.keys(answer[customer]);
    eachCustomerDate.sort(function(a,b){return ((new Date(a)).valueOf() - (new Date(b)).valueOf())});
    eachCustomerDate.reverse();
    console.log(customer,eachCustomerDate)
    let neworder = []
    eachCustomerDate.forEach(msgdate => {
      neworder.push({
        date:msgdate,
        datemsg:answer[customer][msgdate]
      })
    })
    answer[customer] = neworder
  })

  console.log("answer:",answer);
  console.log('************************************************')
}

let anotherData = [
  {
    "chatcontent": "Hello, I need help with my order.",
    "message_date": "2025-03-01",
    "message_time": "14:35",
    "sender": "customer",
    "reciever": "admin",
    "readornot": "yes",
    "customer_name": "John Doe"
  },
  {
    "chatcontent": "Sure, can you provide your order ID?",
    "message_date": "2025-03-01",
    "message_time": "14:37",
    "sender": "admin",
    "reciever": "customer",
    "readornot": "yes",
    "customer_name": "John Doe"
  },
  {
    "chatcontent": "Yes, it's #12345.",
    "message_date": "2025-03-01",
    "message_time": "14:40",
    "sender": "customer",
    "reciever": "admin",
    "readornot": "yes",
    "customer_name": "John Doe"
  },
  {
    "chatcontent": "Thank you! Let me check the details.",
    "message_date": "2025-03-01",
    "message_time": "14:42",
    "sender": "admin",
    "reciever": "customer",
    "readornot": "no",
    "customer_name": "John Doe"
  },
  {
    "chatcontent": "Hi, I haven't received my refund yet.",
    "message_date": "2025-02-28",
    "message_time": "10:15",
    "sender": "customer",
    "reciever": "admin",
    "readornot": "yes",
    "customer_name": "Jane Smith"
  },
  {
    "chatcontent": "Let me check the status for you.",
    "message_date": "2025-02-28",
    "message_time": "10:18",
    "sender": "admin",
    "reciever": "customer",
    "readornot": "yes",
    "customer_name": "Jane Smith"
  },
  {
    "chatcontent": "Any updates on my request?",
    "message_date": "2025-02-28",
    "message_time": "12:05",
    "sender": "customer",
    "reciever": "admin",
    "readornot": "no",
    "customer_name": "Jane Smith"
  },
  {
    "chatcontent": "Your refund has been processed. You should receive it within 3-5 business days.",
    "message_date": "2025-02-28",
    "message_time": "12:10",
    "sender": "admin",
    "reciever": "customer",
    "readornot": "no",
    "customer_name": "Jane Smith"
  },
  {
    "chatcontent": "Hey, my delivery is delayed. Can you check?",
    "message_date": "2025-03-01",
    "message_time": "16:22",
    "sender": "customer",
    "reciever": "admin",
    "readornot": "yes",
    "customer_name": "Michael Johnson"
  },
  {
    "chatcontent": "Yes, I will check and update you shortly.",
    "message_date": "2025-03-01",
    "message_time": "16:25",
    "sender": "admin",
    "reciever": "customer",
    "readornot": "yes",
    "customer_name": "Michael Johnson"
  },
  {
    "chatcontent": "I still haven't received an update.",
    "message_date": "2025-03-02",
    "message_time": "09:30",
    "sender": "customer",
    "reciever": "admin",
    "readornot": "no",
    "customer_name": "Michael Johnson"
  },
  {
    "chatcontent": "The package is out for delivery today.",
    "message_date": "2025-03-02",
    "message_time": "10:00",
    "sender": "admin",
    "reciever": "customer",
    "readornot": "no",
    "customer_name": "Michael Johnson"
  },
  {
    "chatcontent": "Can I change my delivery address?",
    "message_date": "2025-02-27",
    "message_time": "13:50",
    "sender": "customer",
    "reciever": "admin",
    "readornot": "yes",
    "customer_name": "Emily Davis"
  },
  {
    "chatcontent": "I'm sorry, but the order has already been shipped.",
    "message_date": "2025-02-27",
    "message_time": "14:00",
    "sender": "admin",
    "reciever": "customer",
    "readornot": "yes",
    "customer_name": "Emily Davis"
  },
  {
    "chatcontent": "I received the wrong item in my order.",
    "message_date": "2025-03-01",
    "message_time": "17:10",
    "sender": "customer",
    "reciever": "admin",
    "readornot": "no",
    "customer_name": "Emily Davis"
  },
  {
    "chatcontent": "We apologize for the mistake. We will arrange a replacement.",
    "message_date": "2025-03-01",
    "message_time": "17:20",
    "sender": "admin",
    "reciever": "customer",
    "readornot": "no",
    "customer_name": "Emily Davis"
  },
  {
    "chatcontent": "Is there a discount for first-time buyers?",
    "message_date": "2025-02-26",
    "message_time": "11:05",
    "sender": "customer",
    "reciever": "admin",
    "readornot": "yes",
    "customer_name": "David Wilson"
  },
  {
    "chatcontent": "Yes! You get a 10% discount on your first purchase.",
    "message_date": "2025-02-26",
    "message_time": "11:10",
    "sender": "admin",
    "reciever": "customer",
    "readornot": "yes",
    "customer_name": "David Wilson"
  },
  {
    "chatcontent": "How do I apply the discount code?",
    "message_date": "2025-02-27",
    "message_time": "09:20",
    "sender": "customer",
    "reciever": "admin",
    "readornot": "no",
    "customer_name": "David Wilson"
  },
  {
    "chatcontent": "You can enter the code at checkout under the 'Promo Code' section.",
    "message_date": "2025-02-27",
    "message_time": "09:25",
    "sender": "admin",
    "reciever": "customer",
    "readornot": "no",
    "customer_name": "David Wilson"
  },
  {
    "chatcontent": "Why is my payment not going through?",
    "message_date": "2025-02-25",
    "message_time": "15:45",
    "sender": "customer",
    "reciever": "admin",
    "readornot": "yes",
    "customer_name": "Sophia Martinez"
  },
  {
    "chatcontent": "Can you check if your card details are entered correctly?",
    "message_date": "2025-02-25",
    "message_time": "15:50",
    "sender": "admin",
    "reciever": "customer",
    "readornot": "yes",
    "customer_name": "Sophia Martinez"
  },
  {
    "chatcontent": "I checked, and it's still not working.",
    "message_date": "2025-02-26",
    "message_time": "08:10",
    "sender": "customer",
    "reciever": "admin",
    "readornot": "no",
    "customer_name": "Sophia Martinez"
  },
  {
    "chatcontent": "Try using a different payment method or contact your bank.",
    "message_date": "2025-02-26",
    "message_time": "08:15",
    "sender": "admin",
    "reciever": "customer",
    "readornot": "no",
    "customer_name": "Sophia Martinez"
  }
]



// check(anotherData);
let hold = new Date()
console.log(hold.getFullYear() + '-' + (Number(hold.getMonth())+1) + '-' + hold.getDate())
// console.log(hold.split(' ')[4])
